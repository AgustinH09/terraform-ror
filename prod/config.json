{
  "aws_region": "us-east-1",
  "profile": "default",
  "vpc": {
    "cidr_block": "10.0.0.0/16",
    "subnets": {
      "public": [
        {
          "cidr_block": "10.0.1.0/24",
          "availability_zone": "us-east-1a"
        },
        {
          "cidr_block": "10.0.2.0/24",
          "availability_zone": "us-east-1b"
        }
      ],
      "private": [
        {
          "cidr_block": "10.0.3.0/24",
          "availability_zone": "us-east-1a"
        },
        {
          "cidr_block": "10.0.4.0/24",
          "availability_zone": "us-east-1b"
        }
      ]
    }
  },
  "alb": {
    "name": "infra1-alb",
    "target_group": {
      "name": "app-target-group",
      "port": 8080,
      "protocol": "HTTP",
      "health_check": {
        "path": "/",
        "protocol": "HTTP",
        "interval": 30,
        "timeout": 5,
        "healthy_threshold": 2,
        "unhealthy_threshold": 2,
        "matcher": "200"
      }
    },
    "listeners": [
      {
        "port": 8080,
        "protocol": "HTTP",
        "default_actions": [
          {
            "type": "forward",
            "target_group_name": "app-target-group"
          }
        ]
      }
    ]
  },
  "storage_service": {
    "bucket_name": "infra1-s3-storage-bucket"
  },
  "static_website": {
    "bucket_name": "infra1-s3-static-website-bucket",
    "file_source_dir": "../../assets/static_website",
    "website_htmls_files": ["index.html", "error.html"]
  },
  "logging_bucket": {
    "bucket_name": "infra1-s3-logging-bucket"
  },
  "sns": {
    "topic_name": "broadcast-topic",
    "subscriptions": {
      "email": {
        "protocol": "email",
        "endpoint": "agus.hernandez9@gmail.com"
      }
    }
  },
  "web_service": {
    "ssh_bucket": {
      "bucket_name": "infra1-s3-ssh-bucket"
    },
    "web_service_bucket": {
      "bucket_name": "infra1-s3-web-service-bucket"
    },
    "file_source_dir": "../../assets/web_service",
    "instances": [
      {
        "ami_id": "ami-051f8a213df8bc089",
        "instance_name": "web-service-1",
        "instance_type": "t2.micro",
        "instance_count": 2,
        "public": true,
        "enable_ipv6": true,
        "env_vars": {
          "PORT": 8080,
          "NOTIFICATION_MESSAGE": "Bye from web-service-1",
          "NOTIFICATION_SUBJECT": "Web Service 1"
        },
        "security_group_rules": {
          "ingress": [
            {
              "from_port": 80,
              "to_port": 80,
              "protocol": "tcp",
              "cidr_blocks": ["0.0.0.0/0"],
              "ipv6_cidr_blocks": []
            },
            {
              "from_port": 8080,
              "to_port": 8080,
              "protocol": "tcp",
              "cidr_blocks": ["0.0.0.0/0"],
              "ipv6_cidr_blocks": []
            },
            {
              "from_port": 22,
              "to_port": 22,
              "protocol": "tcp",
              "cidr_blocks": ["0.0.0.0/0"],
              "ipv6_cidr_blocks": []
            }
          ],
          "egress": [
            {
              "from_port": 0,
              "to_port": 0,
              "protocol": "-1",
              "cidr_blocks": ["0.0.0.0/0"],
              "ipv6_cidr_blocks": []
            }
          ]
        }
      },
      {
        "ami_id": "ami-051f8a213df8bc089",
        "instance_name": "web-service-2",
        "instance_type": "t2.micro",
        "instance_count": 2,
        "public": true,
        "enable_ipv6": true,
        "env_vars": {
          "PORT": 8080,
          "NOTIFICATION_MESSAGE": "Hello from web-service-2",
          "NOTIFICATION_SUBJECT": "Web Service 2"
        },
        "security_group_rules": {
          "ingress": [
            {
              "from_port": 80,
              "to_port": 80,
              "protocol": "tcp",
              "cidr_blocks": ["0.0.0.0/0"],
              "ipv6_cidr_blocks": []
            },
            {
              "from_port": 8080,
              "to_port": 8080,
              "protocol": "tcp",
              "cidr_blocks": ["0.0.0.0/0"],
              "ipv6_cidr_blocks": []
            },
            {
              "from_port": 22,
              "to_port": 22,
              "protocol": "tcp",
              "cidr_blocks": ["0.0.0.0/0"],
              "ipv6_cidr_blocks": []
            }
          ],
          "egress": [
            {
              "from_port": 0,
              "to_port": 0,
              "protocol": "-1",
              "cidr_blocks": ["0.0.0.0/0"],
              "ipv6_cidr_blocks": []
            }
          ]
        }
      }
    ]
  },
  "cloudwatch": {
    "group_name": "web-service-logs",
    "retention_days": 14
  },
  "lambda": {
    "bucket": {
      "bucket_name": "infra1-s3-lambda-bucket"
    },
    "function": {
      "code_route": "../../assets/lambda_code/lambda.py",
      "function_name": "notification-lambda",
      "handler": "lambda_function.lambda_handler",
      "runtime": "python3.8",
      "timeout": 10,
      "memory_size": 128
    }
  }
}

